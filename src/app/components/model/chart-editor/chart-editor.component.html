<div fxLayout="column" class="chart-editor" fxFlexFill>
  <mat-toolbar class="chart-editor__toolbar space_border_bottom">
    <div fxLayout="row" fxLayoutAlign="center center" fxFlexFill>
      <div fxFlex></div>

      <button
        mat-icon-button
        color="primary"
        name="chartAddChart"
        (click)="duplicateChart()"
      >
        <mat-icon>add</mat-icon>
      </button>

      <button
        mat-icon-button
        name="chartRemoveChart"
        color="warn"
        (click)="removeChart()"
      >
        <mat-icon>close</mat-icon>
      </button>

      <div fxFlex="6px"></div>

      <button
        mat-raised-button
        name="chartSaveChart"
        class="chart-editor__save-button"
        color="accent"
        (click)="openGenerateBlockmlDialog()"
        >Save as BlockML
      </button>

      <div fxFlex="52px"></div>
    </div>
  </mat-toolbar>

  <div
    fxLayout="column"
    fxLayoutGap="20px"
    class="mp-overflow-auto chart-inner"
  >
    <div class="chart-title__wrapper">
      <m-chart-control-title
        [chart]="chart"
        (titleChange)="titleChange($event)"
      ></m-chart-control-title>
    </div>

    <div>
      <mat-form-field>
        <div fxLayout="row">
          <img
            class="query__chart-icon"
            width="22"
            height="17"
            [src]="'/assets/app/charts/' + (chart.type | chartIcon) + '.svg'"
            alt="chart"
          />

          <mat-select
            placeholder="Type"
            class="mp-chart-editor-field-full-width"
            name="chartType"
            [(ngModel)]="chart.type"
            (selectionChange)="typeChange($event)"
          >
            <mat-option
              class="chart-editor__chart-option"
              name="chartTypeTable"
              [value]="chartTypeEnum.Table"
            >
              <img
                class="chart-editor__chart-icon"
                width="22"
                [src]="'/assets/app/charts/' + chartIconEnum.Table + '.svg'"
                alt="chart"
              />
              Table
            </mat-option>

            <mat-option
              class="chart-editor__chart-option"
              name="chartTypeBarVertical"
              [value]="chartTypeEnum.BarVertical"
            >
              <img
                class="chart-editor__chart-icon"
                width="22"
                [src]="
                  '/assets/app/charts/' + chartIconEnum.BarVertical + '.svg'
                "
                alt="chart"
              />
              Bar Vertical
            </mat-option>

            <mat-option
              class="chart-editor__chart-option"
              name="chartTypeBarVerticalGrouped"
              [value]="chartTypeEnum.BarVerticalGrouped"
            >
              <img
                class="chart-editor__chart-icon"
                width="22"
                [src]="
                  '/assets/app/charts/' +
                  chartIconEnum.BarVerticalGrouped +
                  '.svg'
                "
                alt="chart"
              />
              Bar Vertical Grouped
            </mat-option>

            <mat-option
              class="chart-editor__chart-option"
              name="chartTypeBarVerticalStacked"
              [value]="chartTypeEnum.BarVerticalStacked"
            >
              <img
                class="chart-editor__chart-icon"
                width="22"
                [src]="
                  '/assets/app/charts/' +
                  chartIconEnum.BarVerticalStacked +
                  '.svg'
                "
                alt="chart"
              />
              Bar Vertical Stacked
            </mat-option>

            <mat-option
              class="chart-editor__chart-option"
              name="chartTypeBarVerticalNormalized"
              [value]="chartTypeEnum.BarVerticalNormalized"
            >
              <img
                class="chart-editor__chart-icon"
                width="22"
                [src]="
                  '/assets/app/charts/' +
                  chartIconEnum.BarVerticalNormalized +
                  '.svg'
                "
                alt="chart"
              />
              Bar Vertical Normalized
            </mat-option>

            <mat-option
              class="chart-editor__chart-option"
              name="chartTypeBarHorizontal"
              [value]="chartTypeEnum.BarHorizontal"
            >
              <img
                class="chart-editor__chart-icon"
                width="22"
                [src]="
                  '/assets/app/charts/' + chartIconEnum.BarHorizontal + '.svg'
                "
                alt="chart"
              />
              Bar Horizontal
            </mat-option>

            <mat-option
              class="chart-editor__chart-option"
              name="chartTypeBarHorizontalGrouped"
              [value]="chartTypeEnum.BarHorizontalGrouped"
            >
              <img
                class="chart-editor__chart-icon"
                width="22"
                [src]="
                  '/assets/app/charts/' +
                  chartIconEnum.BarHorizontalGrouped +
                  '.svg'
                "
                alt="chart"
              />
              Bar Horizontal Grouped
            </mat-option>

            <mat-option
              class="chart-editor__chart-option"
              name="chartTypeBarHorizontalStacked"
              [value]="chartTypeEnum.BarHorizontalStacked"
            >
              <img
                class="chart-editor__chart-icon"
                width="22"
                [src]="
                  '/assets/app/charts/' +
                  chartIconEnum.BarHorizontalStacked +
                  '.svg'
                "
                alt="chart"
              />
              Bar Horizontal Stacked
            </mat-option>

            <mat-option
              class="chart-editor__chart-option"
              name="chartTypeBarHorizontalNormalized"
              [value]="chartTypeEnum.BarHorizontalNormalized"
            >
              <img
                class="chart-editor__chart-icon"
                width="22"
                [src]="
                  '/assets/app/charts/' +
                  chartIconEnum.BarHorizontalNormalized +
                  '.svg'
                "
                alt="chart"
              />
              Bar Horizontal Normalized
            </mat-option>

            <mat-option
              class="chart-editor__chart-option"
              name="chartTypePie"
              [value]="chartTypeEnum.Pie"
            >
              <img
                class="chart-editor__chart-icon"
                width="22"
                [src]="'/assets/app/charts/' + chartIconEnum.Pie + '.svg'"
                alt="chart"
              />
              Pie
            </mat-option>

            <mat-option
              class="chart-editor__chart-option"
              name="chartTypePieAdvanced"
              [value]="chartTypeEnum.PieAdvanced"
            >
              <img
                class="chart-editor__chart-icon"
                width="22"
                [src]="
                  '/assets/app/charts/' + chartIconEnum.PieAdvanced + '.svg'
                "
                alt="chart"
              />
              Pie Advanced
            </mat-option>

            <mat-option
              class="chart-editor__chart-option"
              name="chartTypePieGrid"
              [value]="chartTypeEnum.PieGrid"
            >
              <img
                class="chart-editor__chart-icon"
                width="22"
                [src]="'/assets/app/charts/' + chartIconEnum.PieGrid + '.svg'"
                alt="chart"
              />
              Pie Grid
            </mat-option>

            <mat-option
              class="chart-editor__chart-option"
              name="chartTypeLine"
              [value]="chartTypeEnum.Line"
            >
              <img
                class="chart-editor__chart-icon"
                width="22"
                [src]="'/assets/app/charts/' + chartIconEnum.Line + '.svg'"
                alt="chart"
              />
              Line
            </mat-option>

            <mat-option
              class="chart-editor__chart-option"
              name="chartTypeArea"
              [value]="chartTypeEnum.Area"
            >
              <img
                class="chart-editor__chart-icon"
                width="22"
                [src]="'/assets/app/charts/' + chartIconEnum.Area + '.svg'"
                alt="chart"
              />
              Area
            </mat-option>

            <mat-option
              class="chart-editor__chart-option"
              name="chartTypeAreaStacked"
              [value]="chartTypeEnum.AreaStacked"
            >
              <img
                class="chart-editor__chart-icon"
                width="22"
                [src]="
                  '/assets/app/charts/' + chartIconEnum.AreaStacked + '.svg'
                "
                alt="chart"
              />
              Area Stacked
            </mat-option>

            <mat-option
              class="chart-editor__chart-option"
              name="chartTypeAreaNormalized"
              [value]="chartTypeEnum.AreaNormalized"
            >
              <img
                class="chart-editor__chart-icon"
                width="22"
                [src]="
                  '/assets/app/charts/' + chartIconEnum.AreaNormalized + '.svg'
                "
                alt="chart"
              />
              Area Normalized
            </mat-option>

            <mat-option
              class="chart-editor__chart-option"
              name="chartTypeHeatMap"
              [value]="chartTypeEnum.HeatMap"
            >
              <img
                class="chart-editor__chart-icon"
                width="22"
                [src]="'/assets/app/charts/' + chartIconEnum.HeatMap + '.svg'"
                alt="chart"
              />
              Heat Map
            </mat-option>

            <mat-option
              class="chart-editor__chart-option"
              name="chartTypeTreeMap"
              [value]="chartTypeEnum.TreeMap"
            >
              <img
                class="chart-editor__chart-icon"
                width="22"
                [src]="'/assets/app/charts/' + chartIconEnum.TreeMap + '.svg'"
                alt="chart"
              />
              Tree Map
            </mat-option>

            <mat-option
              class="chart-editor__chart-option"
              name="chartTypeNumberCard"
              [value]="chartTypeEnum.NumberCard"
            >
              <img
                class="chart-editor__chart-icon"
                width="22"
                [src]="
                  '/assets/app/charts/' + chartIconEnum.NumberCard + '.svg'
                "
                alt="chart"
              />
              Number Card
            </mat-option>

            <mat-option
              class="chart-editor__chart-option"
              name="chartTypeGauge"
              [value]="chartTypeEnum.Gauge"
            >
              <img
                class="chart-editor__chart-icon"
                width="22"
                [src]="'/assets/app/charts/' + chartIconEnum.Gauge + '.svg'"
                alt="chart"
              />
              Gauge
            </mat-option>

            <mat-option
              class="chart-editor__chart-option"
              name="chartTypeGaugeLinear"
              [value]="chartTypeEnum.GaugeLinear"
            >
              <img
                class="chart-editor__chart-icon"
                width="22"
                height="22"
                [src]="
                  '/assets/app/charts/' + chartIconEnum.GaugeLinear + '.svg'
                "
                alt="chart"
              />
              Gauge Linear
            </mat-option>
          </mat-select>
        </div>
      </mat-form-field>
    </div>

    <h5>Data</h5>

    <div
      fxFlex="50px"
      fxLayout="column"
      fxFlexAlign="end start"
      fxFlexFill
      *ngIf="xFieldChartTypes.indexOf(chart.type) > -1"
    >
      <div fxFlex></div>
      <mat-form-field>
        <mat-select
          placeholder="xField"
          name="chartXField"
          class="mp-chart-editor-field-full-width"
          [(ngModel)]="chart.x_field"
          (selectionChange)="xFieldChange($event)"
        >
          <mat-option
            *ngFor="let field of selectFields"
            name="chartXFieldOption"
            [value]="field.id"
          >
            <span>{{ field.top_label + ' ' | capitalize }}</span>
            <span *ngIf="field.group_label">{{
              field.group_label + ' ' | capitalize
            }}</span>
            <span>{{ field.label | capitalize }}</span>
          </mat-option>

          <mat-option
            *ngIf="chart.type === chartTypeEnum.NumberCard"
            [value]="null"
            >Undefined</mat-option
          >
        </mat-select>
      </mat-form-field>
      <mat-error
        *ngIf="!chart.x_field && chart.type !== chartTypeEnum.NumberCard"
      >
        <m-validation-msg [errors]="{ required: true }"></m-validation-msg>
      </mat-error>
    </div>

    <div
      fxFlex="50px"
      fxLayout="column"
      fxFlexAlign="end start"
      fxFlexFill
      *ngIf="yFieldChartTypes.indexOf(chart.type) > -1"
    >
      <div fxFlex></div>
      <mat-form-field>
        <mat-select
          placeholder="yField"
          name="chartYField"
          class="mp-chart-editor-field-full-width"
          [(ngModel)]="chart.y_field"
          (selectionChange)="yFieldChange($event)"
        >
          <mat-option
            *ngFor="let field of selectFields"
            name="chartYFieldOption"
            [value]="field.id"
          >
            <span>{{ field.top_label + ' ' | capitalize }}</span>
            <span *ngIf="field.group_label">{{
              field.group_label + ' ' | capitalize
            }}</span>
            <span>{{ field.label | capitalize }}</span>
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-error *ngIf="!chart.y_field">
        <m-validation-msg [errors]="{ required: true }"></m-validation-msg>
      </mat-error>
    </div>

    <div *ngIf="yFieldsChartTypes.indexOf(chart.type) > -1">
      <h6>yFields</h6>
      <div fxLayout="column">
        <mat-checkbox
          *ngFor="let field of selectFields"
          name="chartYFieldsCheckbox"
          [checked]="yFieldsIsSelected(field.id)"
          (change)="yFieldsOnClick(field.id)"
        >
          <div name="chartYFieldsCheckboxInner">
            <span>{{ field.top_label + ' ' | capitalize }}</span>
            <span *ngIf="field.group_label">{{
              field.group_label + ' ' | capitalize
            }}</span>
            <span>{{ field.label | capitalize }}</span>
          </div>
        </mat-checkbox>

        <div fxFlex="15px">
          <mat-error *ngIf="!(chart.y_fields.length > 0)">
            <m-validation-msg [errors]="{ required: true }"></m-validation-msg>
          </mat-error>
        </div>
      </div>
    </div>

    <div *ngIf="hideColumnsChartTypes.indexOf(chart.type) > -1">
      <h6>HideColumns</h6>
      <div fxLayout="column">
        <mat-checkbox
          *ngFor="let field of selectFields"
          name="chartHideColumnsCheckbox"
          [checked]="hideColumnsIsSelected(field.id)"
          (change)="hideColumnsOnClick(field.id)"
        >
          <div name="chartHideColumnsCheckboxInner">
            <span>{{ field.top_label + ' ' | capitalize }}</span>
            <span *ngIf="field.group_label">{{
              field.group_label + ' ' | capitalize
            }}</span>
            <span>{{ field.label | capitalize }}</span>
          </div>
        </mat-checkbox>

        <!--
          <div fxFlex="15px">
            <mat-error *ngIf="!(chart.hide_columns.length === selectFields.length)">
              <m-validation-msg [errors]="{'required': true}"></m-validation-msg>
            </mat-error>
          </div>
        -->
      </div>
    </div>

    <div
      fxFlex="50px"
      fxLayout="column"
      fxFlexAlign="end start"
      fxFlexFill
      *ngIf="multiFieldChartTypes.indexOf(chart.type) > -1"
    >
      <div fxFlex></div>

      <mat-form-field>
        <mat-select
          placeholder="multiField"
          name="chartMultiField"
          class="mp-chart-editor-field-full-width"
          [(ngModel)]="chart.multi_field"
          (selectionChange)="multiFieldChange($event)"
        >
          <mat-option
            *ngFor="let field of selectFields"
            name="chartMultiFieldOption"
            [value]="field.id"
          >
            <span>{{ field.top_label + ' ' | capitalize }}</span>
            <span *ngIf="field.group_label">{{
              field.group_label + ' ' | capitalize
            }}</span>
            <span>{{ field.label | capitalize }}</span>
          </mat-option>

          <mat-option [value]="null">Undefined</mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div *ngIf="valueFieldChartTypes.indexOf(chart.type) > -1">
      <mat-form-field>
        <mat-select
          placeholder="valueField"
          name="chartValueField"
          class="mp-chart-editor-field-full-width"
          [(ngModel)]="chart.value_field"
          (selectionChange)="valueFieldChange($event)"
        >
          <mat-option
            *ngFor="let field of selectFields"
            name="chartValueFieldOption"
            [value]="field.id"
          >
            <span>{{ field.top_label + ' ' | capitalize }}</span>
            <span *ngIf="field.group_label">{{
              field.group_label + ' ' | capitalize
            }}</span>
            <span>{{ field.label | capitalize }}</span>
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-error *ngIf="!chart.value_field">
        <m-validation-msg [errors]="{ required: true }"></m-validation-msg>
      </mat-error>
    </div>

    <div
      *ngIf="previousValueFieldChartTypes.indexOf(chart.type) > -1"
      class="mp-chart-editor__value-field"
    >
      <mat-form-field>
        <mat-select
          placeholder="previousValueField"
          name="chartPreviousValueField"
          class="mp-chart-editor-field-full-width"
          [(ngModel)]="chart.previous_value_field"
          (selectionChange)="previousValueFieldChange($event)"
        >
          <mat-option
            *ngFor="let field of selectFields"
            name="chartPreviousValueFieldOption"
            [value]="field.id"
          >
            <span>{{ field.top_label + ' ' | capitalize }}</span>
            <span *ngIf="field.group_label">{{
              field.group_label + ' ' | capitalize
            }}</span>
            <span>{{ field.label | capitalize }}</span>
          </mat-option>

          <mat-option [value]="null">Undefined</mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <h5>Axis</h5>

    <mat-slide-toggle
      *ngIf="xAxisChartTypes.indexOf(chart.type) > -1"
      (change)="toggleXAxis()"
      name="chartXAxisToggle"
      [checked]="chart.x_axis"
    >
      <div name="chartXAxisToggleInner">x axis</div>
    </mat-slide-toggle>

    <mat-slide-toggle
      *ngIf="showXAxisLabelChartTypes.indexOf(chart.type) > -1"
      (change)="toggleShowXAxisLabel()"
      name="chartShowXAxisLabelToggle"
      [checked]="chart.show_x_axis_label"
    >
      <div name="chartShowXAxisLabelToggleInner">show x axis label</div>
    </mat-slide-toggle>

    <div *ngIf="xAxisLabelChartTypes.indexOf(chart.type) > -1">
      <m-chart-control-x-axis-label
        [chart]="chart"
        (xAxisLabelChange)="xAxisLabelChange($event)"
      ></m-chart-control-x-axis-label>
    </div>

    <mat-slide-toggle
      *ngIf="yAxisChartTypes.indexOf(chart.type) > -1"
      (change)="toggleYAxis()"
      name="chartYAxisToggle"
      [checked]="chart.y_axis"
    >
      <div name="chartYAxisToggleInner">y axis</div>
    </mat-slide-toggle>

    <mat-slide-toggle
      *ngIf="showYAxisLabelChartTypes.indexOf(chart.type) > -1"
      (change)="toggleShowYAxisLabel()"
      name="chartShowYAxisLabelToggle"
      [checked]="chart.show_y_axis_label"
    >
      <div name="chartShowYAxisLabelToggleInner">show y axis label</div>
    </mat-slide-toggle>

    <div *ngIf="yAxisLabelChartTypes.indexOf(chart.type) > -1">
      <m-chart-control-y-axis-label
        [chart]="chart"
        (yAxisLabelChange)="yAxisLabelChange($event)"
      ></m-chart-control-y-axis-label>
    </div>

    <mat-slide-toggle
      *ngIf="showAxisChartTypes.indexOf(chart.type) > -1"
      name="chartShowAxisToggle"
      (change)="toggleShowAxis()"
      [checked]="chart.show_axis"
    >
      <div name="chartShowAxisToggleInner">show axis</div>
    </mat-slide-toggle>

    <h5>Options</h5>

    <mat-slide-toggle
      *ngIf="animationsChartTypes.indexOf(chart.type) > -1"
      (change)="toggleAnimations()"
      name="chartAnimationsToggle"
      [checked]="chart.animations"
    >
      <div name="chartAnimationsToggleInner">animations</div>
    </mat-slide-toggle>

    <mat-slide-toggle
      *ngIf="gradientChartTypes.indexOf(chart.type) > -1"
      (change)="toggleGradient()"
      name="chartGradientToggle"
      [checked]="chart.gradient"
    >
      <div name="chartGradientToggleInner">gradient</div>
    </mat-slide-toggle>

    <mat-slide-toggle
      *ngIf="legendChartTypes.indexOf(chart.type) > -1"
      (change)="toggleLegend()"
      name="chartLegendToggle"
      [checked]="chart.legend"
    >
      <div name="chartLegendToggleInner">legend</div>
    </mat-slide-toggle>

    <div *ngIf="legendTitleChartTypes.indexOf(chart.type) > -1">
      <m-chart-control-legend-title
        [chart]="chart"
        (legendTitleChange)="legendTitleChange($event)"
      ></m-chart-control-legend-title>
    </div>

    <mat-slide-toggle
      *ngIf="tooltipDisabledChartTypes.indexOf(chart.type) > -1"
      (change)="toggleTooltipDisabled()"
      name="chartTooltipDisabledToggle"
      [checked]="!chart.tooltip_disabled"
    >
      <div name="chartTooltipDisabledToggleInner">tooltip</div>
    </mat-slide-toggle>

    <mat-slide-toggle
      *ngIf="roundEdgesChartTypes.indexOf(chart.type) > -1"
      (change)="toggleRoundEdges()"
      name="chartRoundEdgesToggle"
      [checked]="chart.round_edges"
    >
      <div name="chartRoundEdgesToggleInner">round edges</div>
    </mat-slide-toggle>

    <mat-slide-toggle
      *ngIf="roundDomainsChartTypes.indexOf(chart.type) > -1"
      (change)="toggleRoundDomains()"
      name="chartRoundDomainsToggle"
      [checked]="chart.round_domains"
    >
      <div name="chartRoundDomainsToggleInner">round domains</div>
    </mat-slide-toggle>

    <mat-slide-toggle
      *ngIf="showGridLinesChartTypes.indexOf(chart.type) > -1"
      (change)="toggleShowGridLines()"
      name="chartShowGridLinesToggle"
      [checked]="chart.show_grid_lines"
    >
      <div name="chartShowGridLinesToggleInner">show grid lines</div>
    </mat-slide-toggle>

    <mat-slide-toggle
      *ngIf="timelineChartTypes.indexOf(chart.type) > -1"
      (change)="toggleTimeline()"
      name="chartTimelineToggle"
      [checked]="chart.timeline"
    >
      <div name="chartTimelineToggleInner">timeline</div>
    </mat-slide-toggle>

    <mat-slide-toggle
      *ngIf="autoScaleChartTypes.indexOf(chart.type) > -1"
      (change)="toggleAutoScale()"
      name="chartAutoScaleToggle"
      [checked]="chart.auto_scale"
    >
      <div name="chartAutoScaleToggleInner">auto scale</div>
    </mat-slide-toggle>

    <mat-slide-toggle
      *ngIf="doughnutChartTypes.indexOf(chart.type) > -1"
      (change)="toggleDoughnut()"
      name="chartDoughnutToggle"
      [checked]="chart.doughnut"
    >
      <div name="chartDoughnutToggleInner">doughnut</div>
    </mat-slide-toggle>

    <mat-slide-toggle
      *ngIf="explodeSlicesChartTypes.indexOf(chart.type) > -1"
      (change)="toggleExplodeSlices()"
      name="chartExplodeSlicesToggle"
      [checked]="chart.explode_slices"
    >
      <div name="chartExplodeSlicesToggleInner">explode slices</div>
    </mat-slide-toggle>

    <mat-slide-toggle
      *ngIf="labelsChartTypes.indexOf(chart.type) > -1"
      (change)="toggleLabels()"
      name="chartLabelsToggle"
      [checked]="chart.labels"
    >
      <div name="chartLabelsToggleInner">labels</div>
    </mat-slide-toggle>

    <div *ngIf="interpolationChartTypes.indexOf(chart.type) > -1">
      <div class="vertical-space"></div>

      <div class="chart-editor__block">
        <mat-form-field>
          <mat-select
            placeholder="Interpolation"
            name="chartInterpolation"
            class="mp-chart-editor-field-full-width"
            [(ngModel)]="chart.interpolation"
            (selectionChange)="interpolationChange($event)"
          >
            <mat-option
              [value]="chartInterpolationEnum.Basis"
              name="chartInterpolationBasis"
              >Basis</mat-option
            >

            <mat-option
              [value]="chartInterpolationEnum.BasisClosed"
              name="chartInterpolationBasisClosed"
              >Basis closed</mat-option
            >

            <mat-option
              [value]="chartInterpolationEnum.Bundle"
              name="chartInterpolationBundle"
              >Bundle</mat-option
            >

            <mat-option
              [value]="chartInterpolationEnum.Cardinal"
              name="chartInterpolationCardinal"
              >Cardinal</mat-option
            >

            <mat-option
              [value]="chartInterpolationEnum.CardinalClosed"
              name="chartInterpolationCardinalClosed"
              >Cardinal closed</mat-option
            >

            <mat-option
              [value]="chartInterpolationEnum.CatmullRom"
              name="chartInterpolationCatmullRom"
              >Catmull rom</mat-option
            >

            <mat-option
              [value]="chartInterpolationEnum.CatmullRomClosed"
              name="chartInterpolationCatmullRomClosed"
              >Catmull rom closed</mat-option
            >

            <mat-option
              [value]="chartInterpolationEnum.Linear"
              name="chartInterpolationLinear"
              >Linear</mat-option
            >

            <mat-option
              [value]="chartInterpolationEnum.LinearClosed"
              name="chartInterpolationLinearClosed"
              >Linear closed</mat-option
            >

            <mat-option
              [value]="chartInterpolationEnum.MonotoneX"
              name="chartInterpolationMonotoneX"
              >Monotone x</mat-option
            >

            <mat-option
              [value]="chartInterpolationEnum.MonotoneY"
              name="chartInterpolationMonotoneY"
              >Monotone y</mat-option
            >

            <mat-option
              [value]="chartInterpolationEnum.Natural"
              name="chartInterpolationNatural"
              >Natural</mat-option
            >

            <mat-option
              [value]="chartInterpolationEnum.Step"
              name="chartInterpolationStep"
              >Step</mat-option
            >

            <mat-option
              [value]="chartInterpolationEnum.StepAfter"
              name="chartInterpolationStepAfter"
              >Step after</mat-option
            >

            <mat-option
              [value]="chartInterpolationEnum.StepBefore"
              name="chartInterpolationStepBefore"
              >Step before</mat-option
            >
          </mat-select>
        </mat-form-field>
      </div>
    </div>

    <div
      class="chart-editor__block"
      *ngIf="colorSchemeChartTypes.indexOf(chart.type) > -1"
    >
      <mat-form-field>
        <mat-select
          placeholder="ColorScheme"
          name="chartColorScheme"
          class="mp-chart-editor-field-full-width"
          [(ngModel)]="chart.color_scheme"
          (selectionChange)="colorSchemeChange($event)"
        >
          <mat-option
            [value]="chartColorSchemeEnum.Vivid"
            name="chartColorSchemeVivid"
            >Vivid (ordinal)</mat-option
          >

          <mat-option
            [value]="chartColorSchemeEnum.Natural"
            name="chartColorSchemeNatural"
            >Natural (ordinal)</mat-option
          >

          <mat-option
            [value]="chartColorSchemeEnum.Cool"
            name="chartColorSchemeCool"
            >Cool (ordinal)</mat-option
          >

          <mat-option
            [value]="chartColorSchemeEnum.Fire"
            name="chartColorSchemeFire"
            >Fire (ordinal)</mat-option
          >

          <mat-option
            [value]="chartColorSchemeEnum.Solar"
            name="chartColorSchemeSolar"
            >Solar (continuous)</mat-option
          >

          <mat-option
            [value]="chartColorSchemeEnum.Air"
            name="chartColorSchemeAir"
            >Air (continuous)</mat-option
          >

          <mat-option
            [value]="chartColorSchemeEnum.Aqua"
            name="chartColorSchemeAqua"
            >Aqua (continuous)</mat-option
          >

          <mat-option
            [value]="chartColorSchemeEnum.Flame"
            name="chartColorSchemeFlame"
            >Flame (ordinal)</mat-option
          >

          <mat-option
            [value]="chartColorSchemeEnum.Ocean"
            name="chartColorSchemeOcean"
            >Ocean (ordinal)</mat-option
          >

          <mat-option
            [value]="chartColorSchemeEnum.Forest"
            name="chartColorSchemeForest"
            >Forest (ordinal)</mat-option
          >

          <mat-option
            [value]="chartColorSchemeEnum.Horizon"
            name="chartColorSchemeHorizon"
            >Horizon (ordinal)</mat-option
          >

          <mat-option
            [value]="chartColorSchemeEnum.Neons"
            name="chartColorSchemeNeons"
            >Neons (ordinal)</mat-option
          >

          <mat-option
            [value]="chartColorSchemeEnum.Picnic"
            name="chartColorSchemePicnic"
            >Picnic (ordinal)</mat-option
          >

          <mat-option
            [value]="chartColorSchemeEnum.Night"
            name="chartColorSchemeNight"
            >Night (ordinal)</mat-option
          >

          <mat-option
            [value]="chartColorSchemeEnum.NightLights"
            name="chartColorSchemeNightLights"
            >NightLights (ordinal)</mat-option
          >
        </mat-select>
      </mat-form-field>
    </div>

    <div *ngIf="schemeTypeChartTypes.indexOf(chart.type) > -1">
      <div class="vertical-space"></div>

      <mat-form-field>
        <mat-select
          placeholder="SchemeType"
          name="chartSchemeType"
          class="mp-chart-editor-field-full-width"
          [(ngModel)]="chart.scheme_type"
          (selectionChange)="schemeTypeChange($event)"
        >
          <mat-option
            [value]="chartSchemeTypeEnum.Ordinal"
            name="chartSchemeTypeOrdinal"
            >Ordinal</mat-option
          >

          <mat-option
            [value]="chartSchemeTypeEnum.Linear"
            name="chartSchemeTypeLinear"
            >Linear</mat-option
          >
        </mat-select>
      </mat-form-field>
    </div>

    <div *ngIf="pageSizeChartTypes.indexOf(chart.type) > -1">
      <m-chart-control-page-size
        [chart]="chart"
        (pageSizeChange)="pageSizeChange($event)"
      ></m-chart-control-page-size>
    </div>

    <div *ngIf="arcWidthChartTypes.indexOf(chart.type) > -1">
      <m-chart-control-arc-width
        [chart]="chart"
        (arcWidthChange)="arcWidthChange($event)"
      ></m-chart-control-arc-width>
    </div>

    <div *ngIf="barPaddingChartTypes.indexOf(chart.type) > -1">
      <form [formGroup]="barPaddingForm">
        <mat-form-field>
          <input
            matInput
            type="number"
            name="chartBarPadding"
            placeholder="barPadding"
            [formControl]="barPadding"
            [errorStateMatcher]="showOnInvalidErrorStateMatcher"
            (blur)="barPaddingBlur()"
          />
          <mat-error>
            <m-validation-msg
              [errors]="barPaddingForm.controls['barPadding'].errors"
            ></m-validation-msg>
          </mat-error>
        </mat-form-field>
      </form>
    </div>

    <div *ngIf="groupPaddingChartTypes.indexOf(chart.type) > -1">
      <form [formGroup]="groupPaddingForm">
        <mat-form-field>
          <input
            matInput
            type="number"
            name="chartGroupPadding"
            placeholder="groupPadding"
            [formControl]="groupPadding"
            [errorStateMatcher]="showOnInvalidErrorStateMatcher"
            (blur)="groupPaddingBlur()"
          />
          <mat-error>
            <m-validation-msg
              [errors]="groupPaddingForm.controls['groupPadding'].errors"
            ></m-validation-msg>
          </mat-error>
        </mat-form-field>
      </form>
    </div>

    <div *ngIf="innerPaddingChartTypes.indexOf(chart.type) > -1">
      <form [formGroup]="innerPaddingForm">
        <mat-form-field>
          <input
            matInput
            type="number"
            placeholder="innerPadding"
            name="chartInnerPadding"
            [formControl]="innerPadding"
            [errorStateMatcher]="showOnInvalidErrorStateMatcher"
            (blur)="innerPaddingBlur()"
          />
          <mat-error>
            <m-validation-msg
              [errors]="innerPaddingForm.controls['innerPadding'].errors"
            ></m-validation-msg>
          </mat-error>
        </mat-form-field>
      </form>
    </div>

    <!--
      <div *ngIf="chart.type === chartTypeEnum.Line">
        <form [formGroup]="rangeFillOpacityForm">
          <mat-form-field>
            <input matInput
                   type="number"
                   name="chartRangeFillOpacity"
                   placeholder="rangeFillOpacity"
                   [formControl]="rangeFillOpacity"
                   [errorStateMatcher]="showOnInvalidErrorStateMatcher"
                   (blur)="rangeFillOpacityBlur()">
            <mat-error>
              <m-validation-msg [errors]="rangeFillOpacityForm.controls['rangeFillOpacity'].errors"></m-validation-msg>
            </mat-error>
          </mat-form-field>
        </form>
      </div>
    -->

    <div *ngIf="angleSpanChartTypes.indexOf(chart.type) > -1">
      <form [formGroup]="angleSpanForm">
        <mat-form-field>
          <input
            matInput
            type="number"
            name="chartAngleSpan"
            placeholder="angleSpan"
            [formControl]="angleSpan"
            [errorStateMatcher]="showOnInvalidErrorStateMatcher"
            (blur)="angleSpanBlur()"
          />
          <mat-error>
            <m-validation-msg
              [errors]="angleSpanForm.controls['angleSpan'].errors"
            ></m-validation-msg>
          </mat-error>
        </mat-form-field>
      </form>
    </div>

    <div *ngIf="startAngleChartTypes.indexOf(chart.type) > -1">
      <form [formGroup]="startAngleForm">
        <mat-form-field>
          <input
            matInput
            type="number"
            placeholder="startAngle"
            name="chartStartAngle"
            [formControl]="startAngle"
            [errorStateMatcher]="showOnInvalidErrorStateMatcher"
            (blur)="startAngleBlur()"
          />
          <mat-error>
            <m-validation-msg
              [errors]="startAngleForm.controls['startAngle'].errors"
            ></m-validation-msg>
          </mat-error>
        </mat-form-field>
      </form>
    </div>

    <div *ngIf="yScaleMinChartTypes.indexOf(chart.type) > -1">
      <form [formGroup]="yScaleMinForm">
        <mat-form-field>
          <input
            matInput
            type="number"
            placeholder="yScaleMin"
            name="chartYScaleMin"
            [formControl]="yScaleMin"
            [errorStateMatcher]="showOnInvalidErrorStateMatcher"
            (blur)="yScaleMinBlur()"
          />
          <mat-error>
            <m-validation-msg
              [errors]="yScaleMinForm.controls['yScaleMin'].errors"
            ></m-validation-msg>
          </mat-error>
        </mat-form-field>
      </form>
    </div>

    <div *ngIf="yScaleMaxChartTypes.indexOf(chart.type) > -1">
      <form [formGroup]="yScaleMaxForm">
        <mat-form-field>
          <input
            matInput
            type="number"
            placeholder="yScaleMax"
            name="chartYScaleMax"
            [formControl]="yScaleMax"
            [errorStateMatcher]="showOnInvalidErrorStateMatcher"
            (blur)="yScaleMaxBlur()"
          />
          <mat-error>
            <m-validation-msg
              [errors]="yScaleMaxForm.controls['yScaleMax'].errors"
            ></m-validation-msg>
          </mat-error>
        </mat-form-field>
      </form>
    </div>

    <div *ngIf="xScaleMaxChartTypes.indexOf(chart.type) > -1">
      <form [formGroup]="xScaleMaxForm">
        <mat-form-field>
          <input
            matInput
            type="number"
            placeholder="xScaleMax"
            name="chartXScaleMax"
            [formControl]="xScaleMax"
            [errorStateMatcher]="showOnInvalidErrorStateMatcher"
            (blur)="xScaleMaxBlur()"
          />
          <mat-error>
            <m-validation-msg
              [errors]="xScaleMaxForm.controls['xScaleMax'].errors"
            ></m-validation-msg>
          </mat-error>
        </mat-form-field>
      </form>
    </div>

    <div *ngIf="bigSegmentsChartTypes.indexOf(chart.type) > -1">
      <form [formGroup]="bigSegmentsForm">
        <mat-form-field>
          <input
            matInput
            type="number"
            name="chartBigSegments"
            placeholder="bigSegments"
            [formControl]="bigSegments"
            [errorStateMatcher]="showOnInvalidErrorStateMatcher"
            (blur)="bigSegmentsBlur()"
          />
          <mat-error>
            <m-validation-msg
              [errors]="bigSegmentsForm.controls['bigSegments'].errors"
            ></m-validation-msg>
          </mat-error>
        </mat-form-field>
      </form>
    </div>

    <div *ngIf="smallSegmentsChartTypes.indexOf(chart.type) > -1">
      <form [formGroup]="smallSegmentsForm">
        <mat-form-field>
          <input
            matInput
            type="number"
            placeholder="smallSegments"
            name="chartSmallSegments"
            [formControl]="smallSegments"
            [errorStateMatcher]="showOnInvalidErrorStateMatcher"
            (blur)="smallSegmentsBlur()"
          />
          <mat-error>
            <m-validation-msg
              [errors]="smallSegmentsForm.controls['smallSegments'].errors"
            ></m-validation-msg>
          </mat-error>
        </mat-form-field>
      </form>
    </div>

    <div *ngIf="minChartTypes.indexOf(chart.type) > -1">
      <m-chart-control-min
        [chart]="chart"
        (minChange)="minChange($event)"
      ></m-chart-control-min>
    </div>

    <div *ngIf="maxChartTypes.indexOf(chart.type) > -1">
      <m-chart-control-max
        [chart]="chart"
        (maxChange)="maxChange($event)"
      ></m-chart-control-max>
    </div>

    <div *ngIf="unitsChartTypes.indexOf(chart.type) > -1">
      <m-chart-control-units
        [chart]="chart"
        (unitsChange)="unitsChange($event)"
      ></m-chart-control-units>
    </div>

    <m-colorpicker
      *ngIf="bandColorChartTypes.indexOf(chart.type) > -1"
      placeholder="Band Color"
      name="chartBandColor"
      [(ngModel)]="chart.band_color"
      (change)="bandColorChange($event)"
      format="rgb"
    ></m-colorpicker>

    <m-colorpicker
      *ngIf="cardColorChartTypes.indexOf(chart.type) > -1"
      placeholder="Card Color"
      name="chartCardColor"
      [(ngModel)]="chart.card_color"
      (change)="cardColorChange($event)"
      format="rgb"
    ></m-colorpicker>

    <m-colorpicker
      *ngIf="textColorChartTypes.indexOf(chart.type) > -1"
      placeholder="Text Color"
      name="chartTextColor"
      [(ngModel)]="chart.text_color"
      (change)="textColorChange($event)"
      format="rgb"
    ></m-colorpicker>

    <m-colorpicker
      *ngIf="emptyColorChartTypes.indexOf(chart.type) > -1"
      placeholder="Empty Color"
      name="chartEmptyColor"
      [(ngModel)]="chart.empty_color"
      (change)="emptyColorChange($event)"
      format="rgb"
    ></m-colorpicker>

    <h5>Tile</h5>

    <div>
      <div class="vertical-space"></div>

      <div fxLayout="row" class="select-wrapper">
        <mat-form-field>
          <mat-select
            placeholder="TileWidth"
            name="chartTileWidth"
            [(ngModel)]="chart.tile_width"
            (selectionChange)="tileWidthChange($event)"
          >
            <mat-option [value]="chartTileWidthEnum._1" name="chartTileWidth1"
              >1</mat-option
            >

            <mat-option [value]="chartTileWidthEnum._2" name="chartTileWidth2"
              >2</mat-option
            >

            <mat-option [value]="chartTileWidthEnum._3" name="chartTileWidth3"
              >3</mat-option
            >

            <mat-option [value]="chartTileWidthEnum._4" name="chartTileWidth4"
              >4</mat-option
            >

            <mat-option [value]="chartTileWidthEnum._5" name="chartTileWidth5"
              >5</mat-option
            >

            <mat-option [value]="chartTileWidthEnum._6" name="chartTileWidth6"
              >6</mat-option
            >

            <mat-option [value]="chartTileWidthEnum._7" name="chartTileWidth7"
              >7</mat-option
            >

            <mat-option [value]="chartTileWidthEnum._8" name="chartTileWidth8"
              >8</mat-option
            >

            <mat-option [value]="chartTileWidthEnum._9" name="chartTileWidth9"
              >9</mat-option
            >

            <mat-option [value]="chartTileWidthEnum._10" name="chartTileWidth10"
              >10</mat-option
            >

            <mat-option [value]="chartTileWidthEnum._11" name="chartTileWidth11"
              >11</mat-option
            >

            <mat-option [value]="chartTileWidthEnum._12" name="chartTileWidth12"
              >12</mat-option
            >
          </mat-select>
        </mat-form-field>

        <mat-form-field>
          <mat-select
            placeholder="TileHeight"
            name="chartTileHeight"
            [(ngModel)]="chart.tile_height"
            (selectionChange)="tileHeightChange($event)"
          >
            <mat-option
              [value]="chartTileHeightEnum._300"
              name="chartTileHeight300"
              >300</mat-option
            >

            <mat-option
              [value]="chartTileHeightEnum._400"
              name="chartTileHeight400"
              >400</mat-option
            >

            <mat-option
              [value]="chartTileHeightEnum._500"
              name="chartTileHeight500"
              >500</mat-option
            >

            <mat-option
              [value]="chartTileHeightEnum._600"
              name="chartTileHeight600"
              >600</mat-option
            >

            <mat-option
              [value]="chartTileHeightEnum._700"
              name="chartTileHeight700"
              >700</mat-option
            >

            <mat-option
              [value]="chartTileHeightEnum._800"
              name="chartTileHeight800"
              >800</mat-option
            >

            <mat-option
              [value]="chartTileHeightEnum._900"
              name="chartTileHeight900"
              >900</mat-option
            >

            <mat-option
              [value]="chartTileHeightEnum._1000"
              name="chartTileHeight1000"
              >1000</mat-option
            >

            <mat-option
              [value]="chartTileHeightEnum._1100"
              name="chartTileHeight1100"
              >1100</mat-option
            >

            <mat-option
              [value]="chartTileHeightEnum._1200"
              name="chartTileHeight1200"
              >1200</mat-option
            >

            <mat-option
              [value]="chartTileHeightEnum._1300"
              name="chartTileHeight1300"
              >1300</mat-option
            >

            <mat-option
              [value]="chartTileHeightEnum._1400"
              name="chartTileHeight1400"
              >1400</mat-option
            >

            <mat-option
              [value]="chartTileHeightEnum._1500"
              name="chartTileHeight1500"
              >1500</mat-option
            >

            <mat-option
              [value]="chartTileHeightEnum._1600"
              name="chartTileHeight1600"
              >1600</mat-option
            >

            <mat-option
              [value]="chartTileHeightEnum._1700"
              name="chartTileHeight1700"
              >1700</mat-option
            >

            <mat-option
              [value]="chartTileHeightEnum._1800"
              name="chartTileHeight1800"
              >1800</mat-option
            >

            <mat-option
              [value]="chartTileHeightEnum._1900"
              name="chartTileHeight1900"
              >1900</mat-option
            >
          </mat-select>
        </mat-form-field>
      </div>
    </div>

    <div>
      <div class="vertical-space"></div>

      <mat-form-field>
        <mat-select
          placeholder="ViewSize"
          name="chartViewSize"
          class="mp-chart-editor-field-full-width"
          [(ngModel)]="chart.view_size"
          (selectionChange)="viewSizeChange($event)"
        >
          <mat-option [value]="chartViewSizeEnum.Auto" name="chartViewSizeAuto"
            >Auto</mat-option
          >

          <mat-option
            [value]="chartViewSizeEnum.Manual"
            name="chartViewSizeManual"
            >Manual</mat-option
          >
        </mat-select>
      </mat-form-field>
    </div>

    <div>
      <div
        fxLayout="row"
        class="flex-wrap"
        *ngIf="chart.view_size === chartViewSizeEnum.Manual"
      >
        <form [formGroup]="viewWidthForm">
          <mat-form-field>
            <input
              matInput
              type="number"
              placeholder="ViewWidth"
              name="chartViewWidth"
              [formControl]="viewWidth"
              [errorStateMatcher]="showOnInvalidErrorStateMatcher"
              (blur)="viewWidthBlur()"
            />
            <mat-error>
              <m-validation-msg
                [errors]="viewWidthForm.controls['viewWidth'].errors"
              ></m-validation-msg>
            </mat-error>
          </mat-form-field>
        </form>

        <form [formGroup]="viewHeightForm">
          <mat-form-field>
            <input
              matInput
              type="number"
              placeholder="ViewHeight"
              name="chartViewHeight"
              [formControl]="viewHeight"
              [errorStateMatcher]="showOnInvalidErrorStateMatcher"
              (blur)="viewHeightBlur()"
            />
            <mat-error>
              <m-validation-msg
                [errors]="viewHeightForm.controls['viewHeight'].errors"
              ></m-validation-msg>
            </mat-error>
          </mat-form-field>
        </form>
      </div>

      <div class="vertical-space"></div>
    </div>
  </div>
</div>
